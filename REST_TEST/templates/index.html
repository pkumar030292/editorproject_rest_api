<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dynamic HLD Generator</title>
    <link rel="stylesheet" href="{{ url_for('static', path='css/style.css') }}">
   <style>
    /* Modern Compact Tabs Styling */
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap');

    body {
        font-family: 'Montserrat', sans-serif;
        font-size: 14px; /* smaller font */
        color: #333;
    }

    .tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 15px;
    }

    .tab-btn {
        padding: 6px 12px;
        cursor: pointer;
        border: 1px solid #ccc;
        border-bottom: none;
        background: #f0f0f0;
        font-weight: 600;
        border-radius: 8px 8px 0 0;
        transition: all 0.3s ease;
        font-size: 13px;
        letter-spacing: 0.5px;
        color: #444;
    }

    .tab-btn:hover {
        background: #d3f8d3;
        color: #222;
        transform: translateY(-2px);
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .tab-btn.active {
        background: #079C23;
        color: #fff;
        border-bottom: 4px solid #F40B1F;
        box-shadow: 0 4px 6px rgba(0,0,0,0.15);
    }

    .tab-content {
        display: none;
        border: 1px solid #ccc;
        padding: 12px 15px;
        border-radius: 0 8px 8px 8px;
        background: #fafafa;
        box-shadow: inset 0 0 5px rgba(0,0,0,0.03);
        font-size: 13px;
        line-height: 1.4;
    }

    .tab-content.active {
        display: block;
    }

    /* Optional: subtle scrollbar for content overflow */
    .tab-content::-webkit-scrollbar {
        width: 6px;
    }
    .tab-content::-webkit-scrollbar-thumb {
        background: #ccc;
        border-radius: 3px;
    }
</style>

</head>
<body>
<header>
    <h1>Dynamic HLD Generator</h1>
    <!-- Manage DB Button -->
    <button onclick="window.location.href='/dbpage'">Manage DB</button>
</header>

<main class="container">
    <!-- Tabs -->
    <div class="tabs">
        <div class="tab-btn active" data-tab="generateSection">Generate Template</div>
        <div class="tab-btn" data-tab="downloadSection">Download Template</div>
        <div class="tab-btn" data-tab="uploadSection">Upload New Template</div>
        <div class="tab-btn" data-tab="deleteSection">Delete Template</div>
        <div class="tab-btn" data-tab="pdf2wordSection">Convert Documents</div>
    </div>

    <!-- Document Generation Section -->
    <section class="tab-content active" id="generateSection">
        <h2>Generate Document</h2>
        <label for="template">Select Template:</label>
        <select id="template" class="gsselect" onchange="loadSchema()">
            <option value="">Select Template</option>
            {% for t in templates %}
            <option value="{{ t }}">{{ t }}</option>
            {% endfor %}
        </select>
        <div id="fields"></div>
        <div class="buttons">
            <button onclick="generateDoc()">Generate Document</button>
            <button onclick="previewDoc()">Preview Document</button>
        </div>
        <pre id="previewOutput"></pre>
    </section>

    <!-- File Download Section -->
    <section class="tab-content" id="downloadSection">
        <h2>Download Files</h2>
        <label for="files">Select File:</label>
        <select id="files" class="dsselect" onchange="if(this.value) window.location.href='/download/' + this.value">
            <option value="">Select File</option>
            {% for f in files %}
            <option value="{{ f }}">{{ f }}</option>
            {% endfor %}
        </select>
    </section>

    <!-- Template Upload Section -->
    <section class="tab-content" id="uploadSection">
        <h2>Upload New Template</h2>
        <form id="uploadForm" enctype="multipart/form-data">
            <input type="file" id="templateFile" name="file" required>
            <button type="submit">Upload</button>
        </form>
        <p id="uploadStatus"></p>
    </section>

    <!-- Template Delete Section -->
    <section class="tab-content" id="deleteSection">
        <h2>Delete Template</h2>
        <div class="section">
            <label>Template Name:</label>
            <select id="template-list">
                <option value="">Select Template</option>
                {% for t in templates %}
                <option value="{{ t }}">{{ t }}</option>
                {% endfor %}
            </select>
            <label>Username:</label>
            <input type="text" id="del-username">
            <label>Password:</label>
            <input type="password" id="del-password">
            <button type="button" onclick="deleteTemplate()">Delete Template</button>
            <p id="del-status"></p>
        </div>
    </section>

<section class="tab-content" id="pdf2wordSection">
  <h2>Convert PDF / Image</h2>
  <input type="file" id="inputFile" accept=".pdf,.png,.jpg,.jpeg,.bmp,.tiff">
  <br/>
  <label>
    Conversion Type:
    <select id="conversionType">
      <option value="pdf-word">PDF → Word (native)</option>
      <option value="ocr-pdf-word">PDF → Word (OCR fallback)</option>
      <option value="image-word">Image → Word</option>
      <option value="image-text">Image → Text (.txt)</option>
    </select>
  </label>
  <br/>
  <button type="button" onclick="uploadAndConvertFile()">Convert</button>
  <p id="conversionStatus"></p>
</section>



</main>

<script>
    // Tab Switching
    document.querySelectorAll(".tab-btn").forEach(btn => {
        btn.addEventListener("click", () => {
            // remove active class from all
            document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
            document.querySelectorAll(".tab-content").forEach(c => c.classList.remove("active"));

            // add to selected
            btn.classList.add("active");
            document.getElementById(btn.dataset.tab).classList.add("active");
        });
    });
</script>

<script src="{{ url_for('static', path='js/main.js') }}"></script>
<script src="{{ url_for('static', path='js/generate.js') }}"></script>
<script src="{{ url_for('static', path='js/upload.js') }}"></script>
<script src="{{ url_for('static', path='js/deleteTemplate.js') }}"></script>
<script src="{{ url_for('static', path='js/pdf2word.js') }}"></script>
</body>
</html>
